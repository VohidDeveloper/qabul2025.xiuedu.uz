{"version":3,"file":"Signup-ChBon_hH.js","sources":["../../src/pages/auth/Signup.vue"],"sourcesContent":["<template>\n  <VaForm ref=\"form\" @submit.prevent=\"submit\">\n    <h1 class=\"font-semibold text-4xl mb-4\">Ro‘yxatdan o‘tish</h1>\n    <p class=\"text-base mb-4 leading-5\">\n      Akkountingiz bormi?\n      <RouterLink :to=\"{ name: 'login' }\" class=\"font-semibold text-primary\">Tizimga kirish</RouterLink>\n    </p>\n\n    <VaInput\n      v-model=\"formData.phone\"\n      :rules=\"[(v) => !!v || 'Telefon raqam majburiy']\"\n      class=\"mb-4\"\n      label=\"Telefon raqam (998901234567 formatda)\"\n      type=\"text\"\n    />\n\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\n      <VaInput\n        v-model=\"formData.password\"\n        :rules=\"passwordRules\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"Parol\"\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n\n      <VaInput\n        v-model=\"formData.repeatPassword\"\n        :rules=\"[(v) => !!v || 'Parolni tasdiqlash majburiy', (v) => v === formData.password || 'Parollar mos emas']\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"Parolni tasdiqlash\"\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n    </VaValue>\n\n    <div class=\"flex justify-center mt-4\">\n      <VaButton class=\"w-full\" :loading=\"loading\" @click=\"submit\">Ro‘yxatdan o‘tish</VaButton>\n    </div>\n  </VaForm>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useForm, useToast } from 'vuestic-ui'\nimport axios from '@/services/axios'\nimport api from '@/services/api'\n\nconst { validate } = useForm('form')\nconst { push } = useRouter()\nconst { init } = useToast()\n\nconst loading = ref(false)\n\nconst formData = reactive({\n  phone: '',\n  password: '',\n  repeatPassword: '',\n})\n\nconst passwordRules = [\n  (v: string) => !!v || 'Parol majburiy',\n  (v: string) => v.length >= 8 || 'Kamida 8 belgidan iborat bo‘lishi kerak',\n  (v: string) => /[A-Za-z]/.test(v) || 'Kamida 1 ta harf kerak',\n  (v: string) => /\\d/.test(v) || 'Kamida 1 ta raqam kerak',\n  (v: string) => /[!@#$%^&*]/.test(v) || 'Kamida 1 ta maxsus belgi kerak',\n]\n\nconst submit = async () => {\n  const isValid = await validate()\n  if (!isValid) return\n\n  loading.value = true\n  try {\n    await axios.post(api.register(), {\n      phone: formData.phone,\n      password: formData.password,\n    })\n\n    init({ message: 'Tasdiqlash kodi SMS orqali yuborildi', color: 'info' })\n    push({ name: 'verify', query: { phone: formData.phone } })\n  } catch (error) {\n    init({ message: 'Ro‘yxatdan o‘tishda xatolik', color: 'danger' })\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n"],"names":["validate","useForm","push","useRouter","init","useToast","loading","ref","formData","reactive","passwordRules","v","submit","axios","api"],"mappings":"uUAiEA,KAAM,CAAE,SAAAA,CAAA,EAAaC,EAAQ,MAAM,EAC7B,CAAE,KAAAC,GAASC,IACX,CAAE,KAAAC,GAASC,IAEXC,EAAUC,EAAI,EAAK,EAEnBC,EAAWC,EAAS,CACxB,MAAO,GACP,SAAU,GACV,eAAgB,EAAA,CACjB,EAEKC,EAAgB,CACnBC,GAAc,CAAC,CAACA,GAAK,iBACrBA,GAAcA,EAAE,QAAU,GAAK,0CAC/BA,GAAc,WAAW,KAAKA,CAAC,GAAK,yBACpCA,GAAc,KAAK,KAAKA,CAAC,GAAK,0BAC9BA,GAAc,aAAa,KAAKA,CAAC,GAAK,gCAAA,EAGnCC,EAAS,SAAY,CAEzB,GADgB,MAAMZ,IAGtB,CAAAM,EAAQ,MAAQ,GACZ,GAAA,CACF,MAAMO,EAAM,KAAKC,EAAI,SAAA,EAAY,CAC/B,MAAON,EAAS,MAChB,SAAUA,EAAS,QAAA,CACpB,EAEDJ,EAAK,CAAE,QAAS,uCAAwC,MAAO,MAAQ,CAAA,EAClEF,EAAA,CAAE,KAAM,SAAU,MAAO,CAAE,MAAOM,EAAS,KAAM,CAAA,CAAG,OAC3C,CACdJ,EAAK,CAAE,QAAS,8BAA+B,MAAO,QAAU,CAAA,CAAA,QAChE,CACAE,EAAQ,MAAQ,EAClB,EAAA"}