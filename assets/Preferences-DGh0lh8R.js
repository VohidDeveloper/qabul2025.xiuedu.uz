import{M as j,N as F,O as h,g as M,r as m,e as _,c as A,d as l,w as p,a as e,t as $,u as f,F as S,j as E,f as v,l as g,h as k,k as P,L as I,G as O}from"./index-BZ-BXCh5.js";import{u as U}from"./useToast-CM91r3xC.js";import{u as D}from"./useForm-CRGQ5HdT.js";const B=j("users",{state:()=>({items:[],isLoading:!1}),actions:{async fetchUsers(){this.isLoading=!0;try{const r=await F.get(h.users());this.items=r.data.results||r.data}catch(r){console.error("Foydalanuvchilarni olishda xatolik:",r)}finally{this.isLoading=!1}},async addUser(r){const d=await F.post(h.users(),r);this.items.unshift(d.data)},async updateUser(r,d){const a=await F.put(h.user(r),d),i=this.items.findIndex(o=>o.id===r);i!==-1&&this.items.splice(i,1,a.data)},async deleteUser(r){await F.delete(h.user(r)),this.items=this.items.filter(d=>d.id!==r)}}}),Y={class:"flex flex-col justify-center"},G={class:"text-[28px] md:text-[32px] leading-10 font-bold"},H={class:"flex space-x-1 text-[13px] leading-4"},J=M({__name:"PreferencesHeader",setup(r){const d=B();return(a,i)=>{const o=m("VaAvatar");return _(),A(S,null,[l(o,{size:"large",color:"warning"},{default:p(()=>i[0]||(i[0]=[e("span",{class:"text-4xl"}," 😍 ",-1)])),_:1}),e("div",Y,[e("h2",G,$(f(d).userName),1),e("div",H,[i[1]||(i[1]=e("p",null,"Member since",-1)),e("p",null,$(f(d).memberSince),1)])])],64)}}}),b={"--va-button-font-size":"14px","--va-button-line-height":"20px"},K={class:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},Q={class:"flex-1"},W={class:"max-w-[748px]"},X={class:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},Z={class:"flex-1"},ee={class:"max-w-[748px]"},se={class:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},te={class:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},oe={class:"flex-1"},le={class:"max-w-[748px]"},ae={class:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},ne={class:"flex-1"},de={class:"max-w-[748px]"},ie={class:"flex space-x-1 w-fit"},re=M({__name:"Settings",emits:["openNameModal","openResetPasswordModal"],setup(r,{emit:d}){const a=B(),{init:i}=U(),o=E(()=>a.is2FAEnabled?"2FA successfully enabled":"2FA successfully disabled"),c=E(()=>a.is2FAEnabled?{color:"danger",button:"Disable 2FA",content:"Two-Factor Authentication (2FA) is now enabled for your account, adding an extra layer of security to your sign-ins."}:{color:"primary",button:"Set up 2FA",content:"Add an extra layer of security to your account. To sign in, you’ll need to provide a code along with your username and password."}),V=()=>{a.toggle2FA(),i({message:o.value,color:"success"})},w=d;return(u,s)=>{const x=m("VaButton"),y=m("VaDivider"),n=m("RouterLink");return _(),A(S,null,[e("div",K,[s[3]||(s[3]=e("p",{class:"font-bold w-[200px]"},"Name",-1)),e("div",Q,[e("div",W,$(f(a).userName),1)]),l(x,{style:g(f(b)),class:"w-fit h-fit",preset:"primary",onClick:s[0]||(s[0]=t=>w("openNameModal"))},{default:p(()=>s[2]||(s[2]=[v(" Edit ")])),_:1},8,["style"])]),l(y),e("div",X,[s[4]||(s[4]=e("p",{class:"font-bold w-[200px]"},"Email",-1)),e("div",Z,[e("div",ee,$(f(a).email),1)])]),e("div",se,[s[6]||(s[6]=e("p",{class:"font-bold w-[200px]"},"Password",-1)),s[7]||(s[7]=e("div",{class:"flex-1"},[e("div",{class:"max-w-[748px]"},"•••••••••••••")],-1)),l(x,{style:g(f(b)),class:"w-fit h-fit",preset:"primary",onClick:s[1]||(s[1]=t=>w("openResetPasswordModal"))},{default:p(()=>s[5]||(s[5]=[v(" Reset Password ")])),_:1},8,["style"])]),l(y),e("div",te,[s[8]||(s[8]=e("p",{class:"font-bold w-[200px]"},"Two-factor authentication",-1)),e("div",oe,[e("div",le,$(c.value.content),1)]),l(x,{style:g(f(b)),class:"w-fit h-fit",preset:"primary",color:c.value.color,onClick:V},{default:p(()=>[v($(c.value.button),1)]),_:1},8,["style","color"])]),l(y),e("div",ae,[s[11]||(s[11]=e("p",{class:"font-bold w-[200px]"},"Email subscriptions",-1)),e("div",ne,[e("div",de,[s[10]||(s[10]=e("p",null,"To manage what emails you get, visit the",-1)),e("div",ie,[l(n,{to:{name:"settings"},class:"font-semibold text-primary"},{default:p(()=>s[9]||(s[9]=[v("Notification settings")])),_:1})])])])])],64)}}}),ue={class:"flex flex-col-reverse md:flex-row md:items-center md:justify-end md:space-x-4"},ce=M({__name:"EditNameModal",emits:["cancel"],setup(r,{emit:d}){const a=B(),{init:i}=U(),o=d,c=k(a.userName),V=()=>{if(!c.value||c.value===a.userName)return o("cancel");a.changeUserName(c.value),i({message:"You've successfully changed your name",color:"success"}),o("cancel")};return(w,u)=>{const s=m("VaInput"),x=m("VaButton"),y=m("VaForm"),n=m("VaModal");return _(),P(n,{"mobile-fullscreen":!1,size:"small","hide-default-actions":"","max-width":"380px","model-value":"","close-button":"","onUpdate:modelValue":u[2]||(u[2]=t=>o("cancel"))},{default:p(()=>[u[5]||(u[5]=e("h1",{class:"va-h5 mb-4"},"Reset password",-1)),l(y,{ref:"form",onSubmit:I(V,["prevent"])},{default:p(()=>[l(s,{modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=t=>c.value=t),class:"mb-4",label:"Name",placeholder:"Name"},null,8,["modelValue"]),e("div",ue,[l(x,{style:g(f(b)),preset:"secondary",color:"secondary",onClick:u[1]||(u[1]=t=>o("cancel"))},{default:p(()=>u[3]||(u[3]=[v(" Cancel")])),_:1},8,["style"]),l(x,{style:g(f(b)),class:"mb-4 md:mb-0",type:"submit",onClick:V},{default:p(()=>u[4]||(u[4]=[v(" Save")])),_:1},8,["style"])])]),_:1},512)]),_:1})}}}),me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pe={class:"flex flex-col space-y-2"},fe={class:"flex space-x-2 items-center"},xe={class:"flex space-x-2 items-center"},ve={class:"flex flex-col-reverse md:justify-end md:flex-row md:space-x-4"},we=M({__name:"ResetPasswordModal",emits:["cancel"],setup(r,{emit:d}){const a=k(),i=k(),o=k(),{validate:c}=D("form"),{init:V}=U(),w=d,u=()=>{c()&&(V({message:"You've successfully changed your password",color:"success"}),w("cancel"))},s=[n=>!!n||"Old password field is required"],x=[n=>!!n||"New password field is required",n=>(n==null?void 0:n.length)>=8||"Must be at least 8 characters long",n=>new Set(n).size>=6||"Must contain at least 6 unique characters",n=>n!==a.value||"New password cannot be the same"],y=[n=>!!n||"Repeat new password field is required",n=>n===i.value||"Confirm password does not match new password"];return(n,t)=>{const C=m("VaInput"),q=m("VaIcon"),z=m("VaButton"),L=m("VaForm"),T=m("VaModal");return _(),P(T,{"max-width":"530px","mobile-fullscreen":!1,"hide-default-actions":"","model-value":"","close-button":"","onUpdate:modelValue":t[4]||(t[4]=R=>w("cancel"))},{default:p(()=>[t[10]||(t[10]=e("h1",{class:"va-h5 mb-4"},"Reset password",-1)),l(L,{ref:"form",class:"space-y-6",onSubmit:I(u,["prevent"])},{default:p(()=>{var R;return[e("div",me,[l(C,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=N=>a.value=N),rules:s,label:"Old password",placeholder:"Old password","required-mark":"",type:"password"},null,8,["modelValue"]),t[5]||(t[5]=e("div",{class:"hidden md:block"},null,-1)),l(C,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=N=>i.value=N),rules:x,label:"New password",placeholder:"New password","required-mark":"",type:"password"},null,8,["modelValue"]),l(C,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=N=>o.value=N),rules:y,label:"Repeat new password",placeholder:"Repeat new password","required-mark":"",type:"password"},null,8,["modelValue"])]),e("div",pe,[e("div",fe,[e("div",null,[l(q,{name:((R=i.value)==null?void 0:R.length)>=8?"mso-check":"mso-close",color:"secondary",size:"20px"},null,8,["name"])]),t[6]||(t[6]=e("p",null,"Must be at least 8 characters long",-1))]),e("div",xe,[e("div",null,[l(q,{name:new Set(i.value).size>=6?"mso-check":"mso-close",color:"secondary",size:"20px"},null,8,["name"])]),t[7]||(t[7]=e("p",null,"Must contain at least 6 unique characters",-1))])]),e("div",ve,[l(z,{style:g(f(b)),preset:"secondary",color:"secondary",onClick:t[3]||(t[3]=N=>w("cancel"))},{default:p(()=>t[8]||(t[8]=[v(" Cancel")])),_:1},8,["style"]),l(z,{style:g(f(b)),class:"mb-4 md:mb-0",type:"submit",onClick:u},{default:p(()=>t[9]||(t[9]=[v(" Update Password")])),_:1},8,["style"])])]}),_:1},512)]),_:1})}}}),ye={class:"flex flex-col p-4 space-y-10 bg-backgroundSecondary rounded-lg"},_e={class:"flex space-x-5"},ge={class:"space-y-4 md:space-y-6"},$e=M({__name:"Preferences",setup(r){const d=k(!1),a=k(!1);return(i,o)=>(_(),A(S,null,[o[4]||(o[4]=e("h1",{class:"page-title"},"Foydalanuvchi Profili",-1)),e("div",ye,[e("div",_e,[l(J)]),e("div",ge,[l(re,{onOpenNameModal:o[0]||(o[0]=c=>d.value=!0),onOpenResetPasswordModal:o[1]||(o[1]=c=>a.value=!0)})])]),d.value?(_(),P(ce,{key:0,onCancel:o[2]||(o[2]=c=>d.value=!1)})):O("",!0),a.value?(_(),P(we,{key:1,onCancel:o[3]||(o[3]=c=>a.value=!1)})):O("",!0)],64))}});export{$e as default};
//# sourceMappingURL=Preferences-DGh0lh8R.js.map
